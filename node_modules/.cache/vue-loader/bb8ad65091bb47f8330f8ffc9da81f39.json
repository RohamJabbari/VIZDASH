{"remainingRequest":"/Users/rohamjabbari/Desktop/VIS/A5/jabbarir79_A5/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/rohamjabbari/Desktop/VIS/A5/jabbarir79_A5/src/components/ChoroplethMap.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/rohamjabbari/Desktop/VIS/A5/jabbarir79_A5/src/components/ChoroplethMap.vue","mtime":1705750312187},{"path":"/Users/rohamjabbari/Desktop/VIS/A5/jabbarir79_A5/node_modules/cache-loader/dist/cjs.js","mtime":1705744300535},{"path":"/Users/rohamjabbari/Desktop/VIS/A5/jabbarir79_A5/node_modules/babel-loader/lib/index.js","mtime":1705744300565},{"path":"/Users/rohamjabbari/Desktop/VIS/A5/jabbarir79_A5/node_modules/cache-loader/dist/cjs.js","mtime":1705744300535},{"path":"/Users/rohamjabbari/Desktop/VIS/A5/jabbarir79_A5/node_modules/vue-loader/lib/index.js","mtime":1705744299123}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgppbXBvcnQgbWFwV29ybGQgZnJvbSAnQC9hc3NldHMvd29ybGQtZ2VvLmpzb24nOwppbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0Nob3JvcGxldGhNYXAnLAogIHByb3BzOiB7CiAgfSwKICBkYXRhKCkgewogICAgY29uc3Qgc3ZnV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCAqIDQgLyAxMjsKICAgIGNvbnN0IHN2Z0hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCAqIDAuMzU7CiAgICByZXR1cm4gewogICAgICBzdmdXaWR0aDogc3ZnV2lkdGgsCiAgICAgIHN2Z0hlaWdodDogc3ZnSGVpZ2h0LAogICAgICBzdmdQYWRkaW5nOiB7CiAgICAgICAgdG9wOiA1LCByaWdodDogMTUsIGJvdHRvbTogNjAsIGxlZnQ6IDYwLAogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5kcmF3TWFwKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICByZW1vdmVTZWxlY3Rpb24oKSB7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgncmVtb3ZlU2VsZWN0ZWRDb3VudHJpZXMnKTsKICAgIH0sCiAgICBkcmF3TWFwKCkgewogICAgICBjb25zdCBzdmcgPSBkMy5zZWxlY3QodGhpcy4kcmVmcy5jaGFydEdyb3VwKTsKICAgICAgY29uc3QgcHJvamVjdGlvbiA9IGQzLmdlb01lcmNhdG9yKCkuZml0U2l6ZShbdGhpcy5zdmdXaWR0aCwgdGhpcy5zdmdIZWlnaHRdLCBtYXBXb3JsZCk7CgogICAgICBjb25zdCBwYXRoR2VuZXJhdG9yID0gZDMuZ2VvUGF0aCgpLnByb2plY3Rpb24ocHJvamVjdGlvbik7CiAgICAgIGNvbnN0IHRvb2x0aXAgPSBkMy5zZWxlY3QoIiN0b29sdGlwIik7CgogICAgICBzdmcuc2VsZWN0QWxsKCcuY291bnRyeScpCiAgICAgICAgLmRhdGEobWFwV29ybGQuZmVhdHVyZXMpCiAgICAgICAgLmpvaW4oJ3BhdGgnKQogICAgICAgIC5hdHRyKCdjbGFzcycsICdjb3VudHJ5JykKICAgICAgICAuYXR0cignZCcsIHBhdGhHZW5lcmF0b3IpCiAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICdzY2FsZSgxKScpCiAgICAgICAgLmF0dHIoJ2ZpbGwnLCBkID0+IHsKICAgICAgICAgIGNvbnN0IGNvdW50cnlEYXRhID0gdGhpcy5maWx0ZXJlZERhdGEuZmluZChzID0+IHMuaWQgPT09IGQuaWQpOwogICAgICAgICAgY29uc3QgaXNTZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRDb3VudHJpZXMuaW5jbHVkZXMoZC5pZCk7CiAgICAgICAgICAKICAgICAgICAgIGlmIChjb3VudHJ5RGF0YSkgewogICAgICAgICAgaWYgKGNvdW50cnlEYXRhLmNhcmJvblN0b2NrcyA+IDIwMCB8fCBjb3VudHJ5RGF0YS5sYW5kQ292ZXIgPiAxMzApIHsKICAgICAgICAgICAgcmV0dXJuICJ1cmwoI3N0cmlwZXMpIjsgLy8gQXBwbHkgc3RyaXBlIHBhdHRlcm4KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChpc1NlbGVjdGVkKSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMuYnJ1c2hlZENvdW50cmllcy5pbmNsdWRlcyhjb3VudHJ5RGF0YS5pZCkpIHsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgcmV0dXJuICdyZ2IoMjUzLCAyNTUsIDE4MSknOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJ3JnYigxNTAsIDE1MCwgMTUwKScKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMuYnJ1c2hlZENvdW50cmllcy5pbmNsdWRlcyhjb3VudHJ5RGF0YS5pZCkpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENvbG9yRm9yQ291bnRyeShjb3VudHJ5RGF0YSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiAnZGFya2dyZXknOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfX0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiAnZGFya2dyYXknOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmF0dHIoJ29wYWNpdHknLCAxKQogICAgICAgIC5vbignbW91c2VvdmVyJywgKGV2ZW50LCBkKSA9PiB7CiAgICAgICAgICBsZXQgbGFuZENvdmVyVGVtcDsKICAgICAgICAgIGxldCBjYXJib25TdG9ja3NUZW1wOwogICAgICAgICAgbGV0IGRpc2FzdGVyc0ZyZXFUZW1wOwogICAgICAgICAgY29uc3QgaG92ZXJpbmdMYW5kQ292ZXIgPSB0aGlzLmxhbmRDb3Zlci5maW5kKGNvdW50cnkgPT4gY291bnRyeS5pZCA9PT0gZC5pZCk7CiAgICAgICAgICBjb25zdCBob3ZlcmluZ0NhcmJvblN0b2NrcyA9IHRoaXMuY2FyYm9uU3RvY2tzLmZpbmQoY291bnRyeSA9PiBjb3VudHJ5LmlkID09PSBkLmlkKTsKICAgICAgICAgIGNvbnN0IGhvdmVyaW5nRGlzYXN0ZXJzID0gdGhpcy5kaXNhc3RlcnNGcmVxLmZpbmQoY291bnRyeSA9PiBjb3VudHJ5LmlkID09PSBkLmlkKQogICAgICAgICAgaWYgKGhvdmVyaW5nTGFuZENvdmVyKSB7CiAgICAgICAgICAgIGxhbmRDb3ZlclRlbXAgPSBob3ZlcmluZ0xhbmRDb3Zlci52YWx1ZSA9PT0gMCA/ICdObyBEYXRhJyA6IGhvdmVyaW5nTGFuZENvdmVyLnZhbHVlLnRvRml4ZWQoNCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsYW5kQ292ZXJUZW1wID0gJ05vIERhdGEnOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGhvdmVyaW5nQ2FyYm9uU3RvY2tzKSB7CiAgICAgICAgICAgIGNhcmJvblN0b2Nrc1RlbXAgPSBob3ZlcmluZ0NhcmJvblN0b2Nrcy52YWx1ZSA9PT0gMCA/ICdObyBEYXRhJyA6IGhvdmVyaW5nQ2FyYm9uU3RvY2tzLnZhbHVlLnRvRml4ZWQoNCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjYXJib25TdG9ja3NUZW1wID0gJ05vIERhdGEnOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGhvdmVyaW5nRGlzYXN0ZXJzKSB7CiAgICAgICAgICAgIGRpc2FzdGVyc0ZyZXFUZW1wID0gaG92ZXJpbmdEaXNhc3RlcnMudmFsdWUgPT09IC0xID8gJ05vIERhdGEnIDogaG92ZXJpbmdEaXNhc3RlcnMudmFsdWU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkaXNhc3RlcnNGcmVxVGVtcCA9ICdObyBEYXRhJzsKICAgICAgICAgIH0KICAgICAgICAgIHRvb2x0aXAudHJhbnNpdGlvbigpCiAgICAgICAgICAgIC5kdXJhdGlvbigyMDApCiAgICAgICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIDEpOwoKICAgICAgICAgICAgCiAgICAgICAgICB0b29sdGlwLmh0bWwoYAogICAgICAgICAgICA8dGFibGU+CiAgICAgICAgICAgICAgPHRyPjx0ZCBjbGFzcz0ibGFiZWwiPkNvdW50cnk6PC90ZD4gICAgICAgICA8dGQgY2xhc3M9InZhbHVlIj4ke2QucHJvcGVydGllcy5uYW1lfTwvdGQ+PC90cj4KICAgICAgICAgICAgICA8dHI+PHRkIGNsYXNzPSJsYWJlbCI+Q2FyYm9uU3RvY2tzOjwvdGQ+ICAgICAgICA8dGQgY2xhc3M9InZhbHVlIj4ke2NhcmJvblN0b2Nrc1RlbXB9PC90ZD48L3RyPgogICAgICAgICAgICAgIDx0cj48dGQgY2xhc3M9ImxhYmVsIj5MYW5kQ292ZXJJbmRleDo8L3RkPiAgICAgPHRkIGNsYXNzPSJ2YWx1ZSI+JHtsYW5kQ292ZXJUZW1wfTwvdGQ+PC90cj4KICAgICAgICAgICAgICA8dHI+PHRkIGNsYXNzPSJsYWJlbCI+ZGlzYXN0ZXJzRnJlcTo8L3RkPiAgICAgPHRkIGNsYXNzPSJ2YWx1ZSI+JHtkaXNhc3RlcnNGcmVxVGVtcH08L3RkPjwvdHI+CiAgICAgICAgICAgIDwvdGFibGU+CiAgICAgICAgICBgKQogICAgICAgICAgICAuc3R5bGUoJ2xlZnQnLCAoZXZlbnQuY2xpZW50WCAtIDM3NSkgKyAncHgnKQogICAgICAgICAgICAuc3R5bGUoJ3RvcCcsIChldmVudC5jbGllbnRZIC0gMTAwKSArICdweCcpOwogICAgICAgIH0pCiAgICAgICAgLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uKCkgewogICAgICAgICAgdG9vbHRpcC50cmFuc2l0aW9uKCkKICAgICAgICAgICAgLmR1cmF0aW9uKDMwMCkKICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMCk7CiAgICAgICAgfSkKICAgICAgICAub24oJ2NsaWNrJywgKGV2ZW50LCBkKSA9PiB0aGlzLmhhbmRsZUNsaWNrKGQuaWQpKQogICAgfSwKICAgIGhhbmRsZUNsaWNrKGNvdW50cnlJZCkgewogICAgICBjb25zdCBpc1NlbGVjdGVkID0gdGhpcy5zZWxlY3RlZENvdW50cmllcy5pbmNsdWRlcyhjb3VudHJ5SWQpOwogICAgICBpZiAoIWlzU2VsZWN0ZWQpIHsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2NoYW5nZVNlbGVjdGVkQ291bnRyaWVzJywgY291bnRyeUlkKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3JlbW92ZVNlbGVjdGVkQ291bnRyeScsIGNvdW50cnlJZCk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRDb2xvckZvckNvdW50cnkoY291bnRyeURhdGEpIHsKICAgICAgY29uc3QgY29sb3JzID0gWwogICAgICAgICJyZ2IoMjMwLCAyMzAsIDIzMCkiLAogICAgICAgICJyZ2IoMjIwLCAxODMsIDIxMCkiLCAvLyAwIDEgCiAgICAgICAgInJnYigyMTEsIDE0NiwgMTk0KSIsIC8vIDAgMCAKICAgICAgICAicmdiKDE5NSwgMjM4LCAxOTkpIiwgLy8gMSAyIAogICAgICAgICJyZ2IoMTUxLCAxODUsIDE5OSkiLCAKICAgICAgICAicmdiKDE2OCwgMTQwLCAxOTEpIiwgLy8gMSAwIAogICAgICAgICJyZ2IoMTQ4LCAyMjEsIDE2NikiLCAvLyAyIDIgCiAgICAgICAgInJnYigxMjksIDE4NiwgMTYyKSIsIC8vIDIgMSAKICAgICAgICAicmdiKDEwNywgMTIwLCAxNTUpIiwKICAgICAgXTsKICAgICAgbGV0IGxhbmRDb3ZlckNhdGVnb3J5ID0gdGhpcy5nZXRMYW5kQ292ZXJDYXRlZ29yeShjb3VudHJ5RGF0YS5sYW5kQ292ZXIpOwogICAgICBsZXQgY2FyYm9uU3RvY2tzQ2F0ZWdvcnkgPSB0aGlzLmdldENhcmJvblN0b2Nrc0NhdGVnb3J5KGNvdW50cnlEYXRhLmNhcmJvblN0b2Nrcyk7CgogICAgICBpZiAoY2FyYm9uU3RvY2tzQ2F0ZWdvcnkgPT09ICdsb3cnICYmIGxhbmRDb3ZlckNhdGVnb3J5ID09PSAnbG93JykgcmV0dXJuIGNvbG9yc1swXTsKICAgICAgaWYgKGNhcmJvblN0b2Nrc0NhdGVnb3J5ID09PSAnbG93JyAmJiBsYW5kQ292ZXJDYXRlZ29yeSA9PT0gJ21lZGl1bScpIHJldHVybiBjb2xvcnNbMV07CiAgICAgIGlmIChjYXJib25TdG9ja3NDYXRlZ29yeSA9PT0gJ2xvdycgJiYgbGFuZENvdmVyQ2F0ZWdvcnkgPT09ICdoaWdoJykgcmV0dXJuIGNvbG9yc1syXTsKICAgICAgaWYgKGNhcmJvblN0b2Nrc0NhdGVnb3J5ID09PSAnbWVkaXVtJyAmJiBsYW5kQ292ZXJDYXRlZ29yeSA9PT0gJ2xvdycpIHJldHVybiBjb2xvcnNbM107CiAgICAgIGlmIChjYXJib25TdG9ja3NDYXRlZ29yeSA9PT0gJ21lZGl1bScgJiYgbGFuZENvdmVyQ2F0ZWdvcnkgPT09ICdtZWRpdW0nKSByZXR1cm4gY29sb3JzWzRdOwogICAgICBpZiAoY2FyYm9uU3RvY2tzQ2F0ZWdvcnkgPT09ICdtZWRpdW0nICYmIGxhbmRDb3ZlckNhdGVnb3J5ID09PSAnaGlnaCcpIHJldHVybiBjb2xvcnNbNV07CiAgICAgIGlmIChjYXJib25TdG9ja3NDYXRlZ29yeSA9PT0gJ2hpZ2gnICYmIGxhbmRDb3ZlckNhdGVnb3J5ID09PSAnbG93JykgcmV0dXJuIGNvbG9yc1s2XTsKICAgICAgaWYgKGNhcmJvblN0b2Nrc0NhdGVnb3J5ID09PSAnaGlnaCcgJiYgbGFuZENvdmVyQ2F0ZWdvcnkgPT09ICdtZWRpdW0nKSByZXR1cm4gY29sb3JzWzddOwogICAgICBpZiAoY2FyYm9uU3RvY2tzQ2F0ZWdvcnkgPT09ICdoaWdoJyAmJiBsYW5kQ292ZXJDYXRlZ29yeSA9PT0gJ2hpZ2gnKSByZXR1cm4gY29sb3JzWzhdOwogICAgICAKICAgIH0sCiAgICBnZXRMYW5kQ292ZXJDYXRlZ29yeShsYW5kQ292ZXIpIHsKICAgICAgY29uc3QgeEZpcnN0VGljayA9IHRoaXMubGFuZENvdmVyTWluICsgKHRoaXMubGFuZENvdmVyTWF4IC0gdGhpcy5sYW5kQ292ZXJNaW4pLzM7CiAgICAgIGNvbnN0IHhTZWNvbmRUaWNrID0gdGhpcy5sYW5kQ292ZXJNaW4gKyAyKih0aGlzLmxhbmRDb3Zlck1heCAtIHRoaXMubGFuZENvdmVyTWluKS8zOwogICAgICBjb25zdCB4VGhyZXNob2xkcyA9IFt4Rmlyc3RUaWNrLCB4U2Vjb25kVGlja107CiAgICAgIGlmIChsYW5kQ292ZXIgPD0geFRocmVzaG9sZHNbMF0pIHJldHVybiAnbG93JzsKICAgICAgaWYgKGxhbmRDb3ZlciA8PSB4VGhyZXNob2xkc1sxXSkgcmV0dXJuICdtZWRpdW0nOwogICAgICByZXR1cm4gJ2hpZ2gnOwogICAgfSwKCiAgICBnZXRDYXJib25TdG9ja3NDYXRlZ29yeShjYXJib25TdG9ja3MpIHsKICAgICAgY29uc3QgeUZpcnN0VGljayA9IHRoaXMuY2FyYm9uU3RvY2tzTWluICsgKHRoaXMuY2FyYm9uU3RvY2tzTWF4IC0gdGhpcy5jYXJib25TdG9ja3NNaW4pLzM7CiAgICAgIGNvbnN0IHlTZWNvbmRUaWNrID0gdGhpcy5jYXJib25TdG9ja3NNaW4gKyAyKih0aGlzLmNhcmJvblN0b2Nrc01heCAtIHRoaXMuY2FyYm9uU3RvY2tzTWluKS8zOwogICAgICBjb25zdCB5VGhyZXNob2xkcyA9IFt5Rmlyc3RUaWNrLCB5U2Vjb25kVGlja107IAogICAgICBpZiAoY2FyYm9uU3RvY2tzIDw9IHlUaHJlc2hvbGRzWzBdKSByZXR1cm4gJ2xvdyc7CiAgICAgIGlmIChjYXJib25TdG9ja3MgPD0geVRocmVzaG9sZHNbMV0pIHJldHVybiAnbWVkaXVtJzsKICAgICAgcmV0dXJuICdoaWdoJzsKICAgIH0sCiAgfSwKICBjb21wdXRlZDogewogICAgZmlsdGVyZWREYXRhKCkgewogICAgICByZXR1cm4gdGhpcy5jb21iaW5lZERhdGEuZmlsdGVyKGQgPT4gZC5sYW5kQ292ZXIgIT09IDApOwogICAgfSwKICAgIGNvbWJpbmVkRGF0YSgpIHsKICAgICAgbGV0IGNvbWJpbmVkID0gdGhpcy5jYXJib25TdG9ja3MubWFwKGNzID0+IHsKICAgICAgICBsZXQgbGFuZENvdmVyRGF0YSA9IHRoaXMubGFuZENvdmVyLmZpbmQobGFuZENvdmVyID0+IGxhbmRDb3Zlci5pZCA9PT0gY3MuaWQpOwogICAgICAgIGxldCBkaXNhc3RlcnNGcmVxRGF0YSA9IHRoaXMuZGlzYXN0ZXJzRnJlcS5maW5kKGRpc2FzdGVyc0ZyZXEgPT4gZGlzYXN0ZXJzRnJlcS5pZCA9PT0gY3MuaWQpOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICBpZDogY3MuaWQsCiAgICAgICAgICBjb3VudHJ5OiBjcy5jb3VudHJ5LAogICAgICAgICAgY2FyYm9uU3RvY2tzOiBjcy52YWx1ZSwKICAgICAgICAgIGxhbmRDb3ZlcjogbGFuZENvdmVyRGF0YSA/IGxhbmRDb3ZlckRhdGEudmFsdWU6IDAsCiAgICAgICAgICBkaXNhc3RlcnNGcmVxOiBkaXNhc3RlcnNGcmVxRGF0YSA/IGRpc2FzdGVyc0ZyZXFEYXRhLnZhbHVlOiAtMQogICAgICAgIH07CiAgICAgIH0pOwogICAgICByZXR1cm4gY29tYmluZWQ7CiAgICB9LAogICAgbGFuZENvdmVyOiB7CiAgICAgIGdldCgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy5sYW5kQ292ZXI7CiAgICAgIH0KICAgIH0sCiAgICBjYXJib25TdG9ja3M6IHsKICAgICAgZ2V0KCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmNhcmJvblN0b2NrczsKICAgICAgfQogICAgfSwKICAgIGRpc2FzdGVyc0ZyZXE6IHsKICAgICAgZ2V0KCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmRpc2FzdGVyc0ZyZXE7CiAgICAgIH0KICAgIH0sCiAgICBzZWxlY3RlZENvdW50cmllczogewogICAgICBnZXQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMuc2VsZWN0ZWRDb3VudHJpZXM7CiAgICAgIH0KICAgIH0sCiAgICBicnVzaGVkQ291bnRyaWVzOiB7CiAgICAgIGdldCgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy5icnVzaGVkQ291bnRyaWVzOwogICAgICB9CiAgICB9LAogICAgY2FyYm9uU3RvY2tzTWF4KCkgewogICAgICByZXR1cm4gMjAwOwogICAgfSwKICAgIGNhcmJvblN0b2Nrc01pbigpIHsKICAgICAgcmV0dXJuIDA7CiAgICB9LAogICAgbGFuZENvdmVyTWF4KCkgewogICAgICByZXR1cm4gMTMwOwogICAgfSwKICAgIGxhbmRDb3Zlck1pbigpIHsKICAgICAgcmV0dXJuIDcwOwogICAgfSwKICB9LAoKICB3YXRjaDogewogICAgZGlzYXN0ZXJzRnJlcTogewogICAgICBoYW5kbGVyKCkgewogICAgICAgIHRoaXMuZHJhd01hcCgpOwogICAgICB9LAogICAgICBkZWVwOiB0cnVlLAogICAgfSwKICAgIGNhcmJvblN0b2NrczogewogICAgICBoYW5kbGVyKCkgewogICAgICAgIHRoaXMuZHJhd01hcCgpOwogICAgICB9LAogICAgICBkZWVwOiB0cnVlLAogICAgfSwKICAgIGxhbmRDb3ZlcjogewogICAgICBoYW5kbGVyKCkgewogICAgICAgIHRoaXMuZHJhd01hcCgpOwogICAgICB9LAogICAgICBkZWVwOiB0cnVlLAogICAgfSwKICAgIGJydXNoZWRDb3VudHJpZXM6IHsKICAgICAgaGFuZGxlcigpIHsKICAgICAgICB0aGlzLmRyYXdNYXAoKTsKICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZSwKICAgIH0sCiAgICBzZWxlY3RlZENvdW50cmllczogewogICAgICBoYW5kbGVyKCkgewogICAgICAgIHRoaXMuZHJhd01hcCgpOwogICAgICB9LAogICAgICBkZWVwOiB0cnVlLAogICAgfQogIH0sCn0K"},{"version":3,"sources":["ChoroplethMap.vue"],"names":[],"mappings":";;AAsBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChoroplethMap.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"vis-component\" ref=\"chart\">\n    <h6>Carbon Stocks / Land Cover Map</h6>\n    <svg id=\"map-svg\" :width=\"svgWidth\" :height=\"svgHeight\" @dblclick=\"removeSelection\">\n      <defs>\n        <pattern id=\"stripes\" width=\"4\" height=\"4\" patternUnits=\"userSpaceOnUse\" patternTransform=\"rotate(45)\">\n          <rect width=\"2\" height=\"4\" transform=\"translate(0,0)\" fill=\"white\"></rect>\n        </pattern>\n      </defs>\n      <g class=\"chart-group\" ref=\"chartGroup\">\n        <g class=\"grid-background\" ref=\"gridBackground\"></g>\n        <g class=\"axis axis-x\" ref=\"axisX\"></g>\n        <g class=\"axis axis-y\" ref=\"axisY\"></g>\n        <g class=\"points-group\" ref=\"pointsGroup\"></g>\n      </g>\n    </svg>\n    <div id=\"tooltip\" class=\"tooltip\" style=\"opacity:0;\"></div>\n  </div>\n</template>\n\n<script>\n\nimport mapWorld from '@/assets/world-geo.json';\nimport * as d3 from 'd3';\n\nexport default {\n  name: 'ChoroplethMap',\n  props: {\n  },\n  data() {\n    const svgWidth = window.innerWidth * 4 / 12;\n    const svgHeight = window.innerHeight * 0.35;\n    return {\n      svgWidth: svgWidth,\n      svgHeight: svgHeight,\n      svgPadding: {\n        top: 5, right: 15, bottom: 60, left: 60,\n      }\n    }\n  },\n  mounted() {\n    this.drawMap();\n  },\n  methods: {\n    removeSelection() {\n      this.$store.commit('removeSelectedCountries');\n    },\n    drawMap() {\n      const svg = d3.select(this.$refs.chartGroup);\n      const projection = d3.geoMercator().fitSize([this.svgWidth, this.svgHeight], mapWorld);\n\n      const pathGenerator = d3.geoPath().projection(projection);\n      const tooltip = d3.select(\"#tooltip\");\n\n      svg.selectAll('.country')\n        .data(mapWorld.features)\n        .join('path')\n        .attr('class', 'country')\n        .attr('d', pathGenerator)\n        .attr('transform', 'scale(1)')\n        .attr('fill', d => {\n          const countryData = this.filteredData.find(s => s.id === d.id);\n          const isSelected = this.selectedCountries.includes(d.id);\n          \n          if (countryData) {\n          if (countryData.carbonStocks > 200 || countryData.landCover > 130) {\n            return \"url(#stripes)\"; // Apply stripe pattern\n          } else {\n            if (isSelected) {\n              if (this.brushedCountries.includes(countryData.id)) {\n                \n                return 'rgb(253, 255, 181)';\n              } else {\n                return 'rgb(150, 150, 150)'\n              }\n            } else {\n              if (this.brushedCountries.includes(countryData.id)) {\n                return this.getColorForCountry(countryData);\n              } else {\n                return 'darkgrey';\n              }\n            }\n          }} else {\n            return 'darkgray';\n          }\n        })\n        .attr('opacity', 1)\n        .on('mouseover', (event, d) => {\n          let landCoverTemp;\n          let carbonStocksTemp;\n          let disastersFreqTemp;\n          const hoveringLandCover = this.landCover.find(country => country.id === d.id);\n          const hoveringCarbonStocks = this.carbonStocks.find(country => country.id === d.id);\n          const hoveringDisasters = this.disastersFreq.find(country => country.id === d.id)\n          if (hoveringLandCover) {\n            landCoverTemp = hoveringLandCover.value === 0 ? 'No Data' : hoveringLandCover.value.toFixed(4);\n          } else {\n            landCoverTemp = 'No Data';\n          }\n          if (hoveringCarbonStocks) {\n            carbonStocksTemp = hoveringCarbonStocks.value === 0 ? 'No Data' : hoveringCarbonStocks.value.toFixed(4);\n          } else {\n            carbonStocksTemp = 'No Data';\n          }\n          if (hoveringDisasters) {\n            disastersFreqTemp = hoveringDisasters.value === -1 ? 'No Data' : hoveringDisasters.value;\n          } else {\n            disastersFreqTemp = 'No Data';\n          }\n          tooltip.transition()\n            .duration(200)\n            .style('opacity', 1);\n\n            \n          tooltip.html(`\n            <table>\n              <tr><td class=\"label\">Country:</td>         <td class=\"value\">${d.properties.name}</td></tr>\n              <tr><td class=\"label\">CarbonStocks:</td>        <td class=\"value\">${carbonStocksTemp}</td></tr>\n              <tr><td class=\"label\">LandCoverIndex:</td>     <td class=\"value\">${landCoverTemp}</td></tr>\n              <tr><td class=\"label\">disastersFreq:</td>     <td class=\"value\">${disastersFreqTemp}</td></tr>\n            </table>\n          `)\n            .style('left', (event.clientX - 375) + 'px')\n            .style('top', (event.clientY - 100) + 'px');\n        })\n        .on('mouseout', function() {\n          tooltip.transition()\n            .duration(300)\n            .style('opacity', 0);\n        })\n        .on('click', (event, d) => this.handleClick(d.id))\n    },\n    handleClick(countryId) {\n      const isSelected = this.selectedCountries.includes(countryId);\n      if (!isSelected) {\n        this.$store.commit('changeSelectedCountries', countryId);\n      } else {\n        this.$store.commit('removeSelectedCountry', countryId);\n      }\n    },\n    getColorForCountry(countryData) {\n      const colors = [\n        \"rgb(230, 230, 230)\",\n        \"rgb(220, 183, 210)\", // 0 1 \n        \"rgb(211, 146, 194)\", // 0 0 \n        \"rgb(195, 238, 199)\", // 1 2 \n        \"rgb(151, 185, 199)\", \n        \"rgb(168, 140, 191)\", // 1 0 \n        \"rgb(148, 221, 166)\", // 2 2 \n        \"rgb(129, 186, 162)\", // 2 1 \n        \"rgb(107, 120, 155)\",\n      ];\n      let landCoverCategory = this.getLandCoverCategory(countryData.landCover);\n      let carbonStocksCategory = this.getCarbonStocksCategory(countryData.carbonStocks);\n\n      if (carbonStocksCategory === 'low' && landCoverCategory === 'low') return colors[0];\n      if (carbonStocksCategory === 'low' && landCoverCategory === 'medium') return colors[1];\n      if (carbonStocksCategory === 'low' && landCoverCategory === 'high') return colors[2];\n      if (carbonStocksCategory === 'medium' && landCoverCategory === 'low') return colors[3];\n      if (carbonStocksCategory === 'medium' && landCoverCategory === 'medium') return colors[4];\n      if (carbonStocksCategory === 'medium' && landCoverCategory === 'high') return colors[5];\n      if (carbonStocksCategory === 'high' && landCoverCategory === 'low') return colors[6];\n      if (carbonStocksCategory === 'high' && landCoverCategory === 'medium') return colors[7];\n      if (carbonStocksCategory === 'high' && landCoverCategory === 'high') return colors[8];\n      \n    },\n    getLandCoverCategory(landCover) {\n      const xFirstTick = this.landCoverMin + (this.landCoverMax - this.landCoverMin)/3;\n      const xSecondTick = this.landCoverMin + 2*(this.landCoverMax - this.landCoverMin)/3;\n      const xThresholds = [xFirstTick, xSecondTick];\n      if (landCover <= xThresholds[0]) return 'low';\n      if (landCover <= xThresholds[1]) return 'medium';\n      return 'high';\n    },\n\n    getCarbonStocksCategory(carbonStocks) {\n      const yFirstTick = this.carbonStocksMin + (this.carbonStocksMax - this.carbonStocksMin)/3;\n      const ySecondTick = this.carbonStocksMin + 2*(this.carbonStocksMax - this.carbonStocksMin)/3;\n      const yThresholds = [yFirstTick, ySecondTick]; \n      if (carbonStocks <= yThresholds[0]) return 'low';\n      if (carbonStocks <= yThresholds[1]) return 'medium';\n      return 'high';\n    },\n  },\n  computed: {\n    filteredData() {\n      return this.combinedData.filter(d => d.landCover !== 0);\n    },\n    combinedData() {\n      let combined = this.carbonStocks.map(cs => {\n        let landCoverData = this.landCover.find(landCover => landCover.id === cs.id);\n        let disastersFreqData = this.disastersFreq.find(disastersFreq => disastersFreq.id === cs.id);\n        return {\n          id: cs.id,\n          country: cs.country,\n          carbonStocks: cs.value,\n          landCover: landCoverData ? landCoverData.value: 0,\n          disastersFreq: disastersFreqData ? disastersFreqData.value: -1\n        };\n      });\n      return combined;\n    },\n    landCover: {\n      get() {\n        return this.$store.getters.landCover;\n      }\n    },\n    carbonStocks: {\n      get() {\n        return this.$store.getters.carbonStocks;\n      }\n    },\n    disastersFreq: {\n      get() {\n        return this.$store.getters.disastersFreq;\n      }\n    },\n    selectedCountries: {\n      get() {\n        return this.$store.getters.selectedCountries;\n      }\n    },\n    brushedCountries: {\n      get() {\n        return this.$store.getters.brushedCountries;\n      }\n    },\n    carbonStocksMax() {\n      return 200;\n    },\n    carbonStocksMin() {\n      return 0;\n    },\n    landCoverMax() {\n      return 130;\n    },\n    landCoverMin() {\n      return 70;\n    },\n  },\n\n  watch: {\n    disastersFreq: {\n      handler() {\n        this.drawMap();\n      },\n      deep: true,\n    },\n    carbonStocks: {\n      handler() {\n        this.drawMap();\n      },\n      deep: true,\n    },\n    landCover: {\n      handler() {\n        this.drawMap();\n      },\n      deep: true,\n    },\n    brushedCountries: {\n      handler() {\n        this.drawMap();\n      },\n      deep: true,\n    },\n    selectedCountries: {\n      handler() {\n        this.drawMap();\n      },\n      deep: true,\n    }\n  },\n}\n</script>\n\n<style>\n  .country {\n    stroke: #5b5b5b;\n    stroke-width: 1px;\n  }\n\n  .country:hover {\n    fill-opacity: 0.7;\n    stroke: rgb(253, 255, 181);\n  }\n\n  .tooltip {\n    position: absolute;\n    text-align: center;\n    padding: 8px;\n    font: 12px sans-serif;\n    background: rgb(253, 241, 252);\n    border: 1px;\n    border-radius: 8px;\n    pointer-events: none;\n  }\n\n.tooltip table {\n  width: 100%;\n  border-collapse: collapse;\n}\n\n.tooltip .label {\n  width: 150px;\n  text-align: left;\n  font-size: 12px;\n  white-space: nowrap;\n}\n\n.tooltip .country_value {\n  width: 300px;\n  text-align: right;\n  font-size: 12px;\n  white-space: nowrap;\n}\n\n.tooltip .value {\n  width: 150px;\n  font-size: 12px;\n  text-align: right;\n  white-space: nowrap;\n}\n\n.small-country-circle {\n    stroke: red; /* Adjust the color as needed */\n    stroke-width: 3;\n    opacity: 0.7;\n}\n</style>\n"]}]}